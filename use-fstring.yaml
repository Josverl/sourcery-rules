# This file contains optional rules
# that spot when f-string should be used
# instead of an older string formatting mechanism.
#
# Related default rules:
#
# https://docs.sourcery.ai/Reference/Default-Rules/refactorings/use-fstring-for-concatenation/
# https://docs.sourcery.ai/Reference/Default-Rules/refactorings/use-fstring-for-formatting/

rules:

# You can use this rule in the Sourcery CLI with the --enable option:
#
# sourcery review --enable no-str-format .
#
- id: no-str-format
  description: Use f-string instead of `str.format`
  explanation: f-string is less verbose and faster than `str.format`
  pattern: ${text}.format(...)
  condition: text.has_type("str")
  tests:
    - match: "'{0}. place'.format(placement)"
    - match: "'{0}. chapter {1}'.format(nr, title)"
    - match: |
        template = "{0}. place"
        template.format(placement)
    - no-match: |
        sth = CustomObject()
        sth.format(placement)
